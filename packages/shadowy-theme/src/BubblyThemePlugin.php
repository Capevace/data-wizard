<?php

namespace Mateffy\FilaTheme\Shadowy;

use Filament\Contracts\Plugin;
use Filament\Panel;
use Filament\PanelRegistry;
use Filament\Support\Facades\FilamentView;
use Filament\View\PanelsRenderHook;
use Illuminate\Support\Facades\Blade;

class BubblyThemePlugin implements Plugin
{

    public function getId(): string
    {
        return 'shadowy';
    }

    public function register(Panel $panel): void
    {
//        Blade::anonymousComponentNamespace();
//        Blade::anonymousComponentPath(base_path('themes/Shadowy/views'), 'shadowy');

        $panel->viteTheme('resources/css/filament/admin/theme.css');
    }

    public function boot(Panel $panel): void
    {
        FilamentView::registerRenderHook(
            PanelsRenderHook::BODY_START,
            fn () => view('components.themes.bubbly.background')
        );

        FilamentView::registerRenderHook(
            PanelsRenderHook::SIDEBAR_FOOTER,
            fn () => <<<'blade'
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" viewBox="0 0 2400 800" opacity="1"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="sssurf-grad"><stop stop-color="hsl(205, 69%, 60%)" stop-opacity="1" offset="0%"></stop><stop stop-color="hsl(205, 69%, 80%)" stop-opacity="1" offset="100%"></stop></linearGradient></defs><g fill="url(#sssurf-grad)" transform="matrix(1,0,0,1,9.4296875,270.8054885864258)"><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,25)" opacity="0.05"></path><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,50)" opacity="0.24"></path><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,75)" opacity="0.43"></path><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,100)" opacity="0.62"></path><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,125)" opacity="0.81"></path><path d="M-10,10C33.75,10.625,114.58333333333334,17.166666666666668,200,13C285.41666666666663,8.833333333333332,316.66666666666663,-11.041666666666666,400,-10C483.33333333333337,-8.958333333333334,516.6666666666666,16.75,600,18C683.3333333333334,19.25,716.6666666666666,-5.041666666666667,800,-4C883.3333333333334,-2.958333333333333,916.6666666666666,22.583333333333332,1000,23C1083.3333333333333,23.416666666666668,1116.6666666666667,-3.041666666666667,1200,-2C1283.3333333333333,-0.9583333333333333,1316.6666666666667,26.75,1400,28C1483.3333333333333,29.25,1516.6666666666667,4,1600,4C1683.3333333333333,4,1716.6666666666667,26.958333333333332,1800,28C1883.3333333333333,29.041666666666668,1916.6666666666667,7.541666666666666,2000,9C2083.3333333333335,10.458333333333334,2116.6666666666665,34.375,2200,35C2283.3333333333335,35.625,2306.25,-64.04166666666667,2400,12C2493.75,88.04166666666667,3254.1666666666665,215,2650,400C2045.8333333333335,585,156.25,795.8333333333334,-500,900" transform="matrix(1,0,0,1,0,150)" opacity="1.00"></path></g></svg>
            blade
        );

        FilamentView::registerRenderHook(
            PanelsRenderHook::SIDEBAR_NAV_START,
            fn () => view('components.themes.shadowy.sidebar-search')
        );

        FilamentView::registerRenderHook(
            PanelsRenderHook::SIDEBAR_FOOTER,
            fn () => view('components.themes.shadowy.sidebar-profile')
        );
    }

}
